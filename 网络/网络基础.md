# 网络基础

## 一、什么是URL,URI,encodeURI,encodeURIComponent?

### URL 和 URI

1. **URI（Uniform Resource Identifier）**：
   - URI 是一种用于标识资源的字符串，可以是 URL 或 URN（Uniform Resource Name）。**URI 的作用是唯一地标识某个资源**。
   - 例如，`http://example.com` 和 `urn:isbn:0451450523` 都是 URI。

2. **URL（Uniform Resource Locator）**：
   - URL 是一种**特定类型的 URI**，它不仅标识资源，还提供了**获取该资源的方式**（例如，通过 **HTTP、FTP 等协议**）。
   - URL 通常包含协议、主机名、路径和可选的查询参数。例如，`http://example.com/path/to/resource?query=123` 是一个 URL。

    #### URL⼀般包括⼏⼤部分：
    1. protocol，协议头，譬如有http，ftp等
    2. host，主机域名或IP地址
    3. port，端⼝号
    4. path，⽬录路径
    4. query，即查询参数
    5. fragment，即 #后的hash值，⼀般⽤来定位到某个位置

---

### `encodeURI` 和 `encodeURIComponent`

这两个函数用于对 URI 进行编码，以确保其在网络传输中不会出现问题。

1. **`encodeURI`**：
   - 用于对整个 URI 进行编码。它会对 URI 中的某些字符进行编码，但不会对某些特殊字符（如 `:`, `/`, `?`, `&`, `=` 等）进行编码，因为这些字符在 URI 中是有特定含义的。
   - 例如：
    ```javascript
    const url = "http://example.com/path?name=张三&age=20";
    const encodedUrl = encodeURI(url);
    console.log(encodedUrl); 
    // 输出: "http://example.com/path?name=张三&age=20"
    ```
    ==中文在 url 中非法，需要转义==
2. **`encodeURIComponent`**：
   - 用于对 URI 的某个组件（如查询参数）进行编码。它会对所有特殊字符进行编码，以确保它们不会干扰 URI 的结构。
   - 例如：
    ```javascript
    const name = "张三";
    const age = 20;
    const encodedName = encodeURIComponent(name);
    const url = `http://example.com/path?name=${encodedName}&age=${age}`;
    console.log(url);
    // 输出: "http://example.com/path?name=%E5%BC%A0%E4%B8%89&age=20"
    ```
    ==在这个例子中，encodeURIComponent 编码了 name 参数的值，确保它在 URL 中是合法的，即使这个值包含特殊字符。==
- **为什么有些场景用 encodeURI 而不能用 encodeURIComponent？**
使用 encodeURI 的场景通常涉及到完整 URL 的处理。因为 encodeURI 不会编码那些在 URL 中有特殊意义的字符（如 ?, &, = 等），它能确保 URL 的结构不被破坏。而如果用 encodeURIComponent 来处理整个 URL，这些特殊字符都会被编码，导致浏览器或服务器无法正确解析这个 URL。

**正确示例：**
```javascript
const uri = "http://example.com/path?name=John Doe";
const encodedURI = encodeURI(uri);
console.log(encodedURI); // "http://example.com/path?name=John%20Doe"
```

**错误示例：**
```javascript
const url = "http://example.com/path?name=张三&age=20";
const encodedUrl = encodeURIComponent(url);
console.log(encodedUrl);
// 输出: "http%3A%2F%2Fexample.com%2Fpath%3Fname%3D%E5%BC%A0%E4%B8%89%26age%3D20"
```
>这个结果中，整个 URL 被编码为一个字符串，所有的特殊字符都被转义，导致它不再是一个合法的 URL。
---
- **为什么有些场景用 encodeURIComponent 而不能用 encodeURI？**
当你只需要对 URI 的一部分（如查询参数的值）进行编码时，使用 encodeURIComponent。因为 encodeURI 不会编码某些特殊字符，如 &, =, ? 等，而这些字符在查询参数中可能导致歧义或错误的解析，所以必须使用 encodeURIComponent 来确保这些字符被正确编码。


>链接内包含一个回调地址，回调地址是另外一个URL，此时我们就需要使用encodeURIComponent()对回调地址进行转码，这样一来，URL中就不会出现多个http://，多个&这样的特殊字符；方便对回调地址进行处理；以上链接处理如下：
```javascript
// 对URL中的回调链接进行转码
'https://www.baidu.com/s?returnURL=' +encodeURIComponent('http://www.test.com/')
//输出: "https://www.baidu.com/s?returnURL=http%3A%2F%2Fwww.test.com%2F"
```

### 小结

- **URI** 是用于标识资源的字符串，可以是 URL 或 URN。
- **URL** 是一种特定的 URI，提供了获取资源的方法。
- **`encodeURI`** 用于编码整个 URI，而 **`encodeURIComponent`** 用于编码 URI 的某个组件。

---