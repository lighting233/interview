# TCP 和 UDP

## 一、TCP 和 UDP对比
- UPD 无连接不可靠；支持单播，多播，广播；UDP 是面向应用报文的
- TCP 面向连接可靠（不会出现误码，丢失，重复，乱序）全双工；仅支持单播，即一对一的传输；TCP 是面向字节流的，这是他实现可靠传输，流量控制以及拥塞控制的基础
---
## 二、TCP传输控制协议
[b站讲解](https://www.bilibili.com/video/BV1c4411d7jb?p=58&vd_source=78435c3cefd4783245d9d16d09d19859)
[对应笔记](https://github.com/BloothOfYouth/Computer-Network-Notes/blob/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC5%E7%AB%A0%EF%BC%88%E8%BF%90%E8%BE%93%E5%B1%82%EF%BC%89.md)
网络层已经打通两台机器连接的基础，但通信是个机器里不同的进程通过端口号区分，进行连接的
---

### 新版本的 chrome 中同一域名下同时最多能建立几个 tcp 连接？
在现代浏览器中，包括最新版本的 Chrome，针对同一域名（也称为同一主机名）同时能够建立的 TCP 连接数是有限制的。这些限制是为了防止单个网站占用过多的网络资源，从而影响其他网站的性能。

对于 Chrome 浏览器，以下是一些常见的连接限制：

- **HTTP/1.1**：同一域名下最多可以建立 6 个并发的 TCP 连接。
- **HTTP/2**：HTTP/2 协议允许在单个 TCP 连接上进行多路复用（multiplexing），这意味着可以在一个连接上同时处理多个请求。因此，HTTP/2 通常只需要一个 TCP 连接来处理同一域名下的所有请求。

这些限制是由浏览器实现的，并且可能会根据浏览器版本和具体实现有所不同。以下是一个简要的总结：

- **HTTP/1.1**：6 个并发连接
- **HTTP/2**：1 个连接（多路复用）

需要注意的是，这些限制是针对同一域名的，并且不同的浏览器可能会有略微不同的实现，但大多数现代浏览器的行为是相似的。

### TCP首部

- **源端口号：**客户端从49151~65535中随机选一个，例如发送 DNS 查询则封装 TCP 首部，源端口号：65535，目的端口号：53，DNS 服务器收到报文发现目的端口号为 53，则交给 DNS 查询进程
- **目的端口号：**
  - UPD 协议：DNS 53
  - TCP 协议：SMTP 25，FTP 20/21,HTTP 80, HTTPS 443
- **序号**
- **确认号**
- **窗口字段**：rwnd 拥塞窗口 cwnd，发送窗口 swnd
- 等等

首部最小 20 字节，最大 60 字节

### 流量控制

### 拥塞控制

1. 慢开始：维护一个慢开始门限 ssthresh；当 cwnd < ssthresh时使用慢开始算法；cwnd > ssthresh时开始使用拥塞避免算法
2. 拥塞避免
3. 快重传
4. 快恢复
   

## 三、UDP用户数据协议

### UDP首部
- 源端口
- 目的端口
- 长度
- 检验和

四个字段，每个字段 2 字节一共 8 字节
 