## 1.作为一名前端开发者，如何防止xss攻击？
作为前端开发者，防止跨站脚本攻击（XSS）是非常重要的。下面是一些常见的防御措施：

- 输入验证和过滤：对用户输入的数据进行验证和过滤，确保只接受预期的数据格式。可以使用正则表达式或内置的验证函数来检查输入。

- 转义特殊字符：在将用户输入显示在网页上之前，对特殊字符进行转义。例如，将 < 替换为 &lt;，> 替换为 &gt;，以及 " 替换为 &quot;。后端渲染页面的还使用js-xss

- 使用安全的 HTML 解析器：使用安全的 HTML 解析器来处理用户输入的 HTML 内容。这样可以防止恶意脚本的执行。

- 设置 HTTP 头部中的 Content Security Policy（CSP）：CSP 是一种安全机制，通过限制页面可以加载的资源，帮助防止 XSS 攻击。使用 CSP，可以指定允许加载的脚本、样式和其他资源的来源。

- 避免使用 eval() 和 innerHTML：这些函数可以执行动态生成的代码或将用户输入作为 HTML 插入到页面中，因此容易受到 XSS 攻击。尽量使用更安全的替代方法。使用 innerText，setAttribute，避免用户自定义 onload ，herf事件

- 使用 HTTP-only Cookie：将敏感信息存储在 HTTP-only Cookie 中，这样它们将无法通过 JavaScript 访问，从而减少 XSS 攻击的风险。

定期更新和修补漏洞：及时更新和修补使用的框架、库和插件，以确保使用的是最新的安全版本。

这些措施并非绝对，但可以显著降低 XSS 攻击的风险。同时，也建议了解最新的安全威胁和最佳实践，以保持对前端安全的关注。

## 2.使用react等框架为什么能预防xss攻击？即便使用了react框架有可能被xss攻击吗？
React 等现代前端框架本身并不能完全预防 XSS 攻击，但它们提供了一些安全机制和最佳实践，可以帮助减少 XSS 攻击的风险。下面是一些 React 框架提供的安全特性：

- 自动转义：React 在渲染过程中会自动转义用户输入的内容，将特殊字符转换为安全的 HTML 实体。这样可以防止恶意脚本的执行。

- JSX 语法：React 使用 JSX 语法来描述组件的结构和行为，它会在编译过程中进行转义和验证，从而减少了直接操作 DOM 的机会，降低了 XSS 攻击的风险。

- 虚拟 DOM：React 使用虚拟 DOM 来管理页面的更新和渲染，这样可以减少直接操作 DOM 的需求，从而降低了 XSS 攻击的风险。

尽管 React 框架提供了这些安全机制，但仍然有可能因为开发者的不当使用而导致 XSS 攻击的风险。例如，如果在使用 React 的过程中，开发者直接操作了 DOM，或者没有正确地处理用户输入，那么仍然可能存在 XSS 漏洞。

因此，开发者在使用 React 或其他框架时，仍然需要遵循安全最佳实践，如输入验证和过滤、转义特殊字符、使用安全的 HTML 解析器等。同时，定期更新和修补框架、库和插件，以确保使用的是最新的安全版本。综合使用框架提供的安全特性和开发者的安全实践，可以显著降低 XSS 攻击的风险。

## 3.什么是Content Security Policy？具体怎么使用？
Content Security Policy（CSP）是一种安全机制，通过定义和实施策略来限制网页中可以加载的资源，从而减少跨站脚本攻击（XSS）、数据注入和点击劫持等安全风险。CSP 的主要目标是防止恶意脚本的执行，并限制外部资源的加载。

CSP 使用 HTTP 头部中的 Content-Security-Policy 字段来定义策略。以下是一个简单的 CSP 示例：

Content-Security-Policy: default-src 'self';
上述示例指定了默认策略，即只允许从同源（同一域名和端口）加载资源。这意味着除了来自同一域名的资源，其他所有资源（如外部脚本、样式、图片等）都将被浏览器阻止加载。

除了 default-src，CSP 还提供了其他指令来进一步限制资源的加载，例如：

script-src：指定允许加载的脚本资源的来源。
style-src：指定允许加载的样式资源的来源。
img-src：指定允许加载的图片资源的来源。
font-src：指定允许加载的字体资源的来源。
connect-src：指定允许进行网络请求的来源。
frame-src：指定允许加载的内嵌框架的来源。
可以使用单个 CSP 头部字段指定多个指令，如：

Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline';
上述示例中，除了默认策略限制外部资源，还允许从同一域名加载内联脚本（'unsafe-inline'）。

此外，CSP 还支持其他选项和功能，例如：

nonce：用于允许特定的脚本或样式资源，而不必放宽整体策略。
report-uri 或 report-to：用于指定报告违规行为的 URL 或端点，以便收集安全事件信息。
要使用 CSP，你需要在服务器端配置 HTTP 响应头部字段。具体配置方法取决于你使用的服务器和编程语言。可以参考相关文档和资源来了解如何在特定环境中配置 CSP。

请注意，CSP 是一种强大的安全机制，但配置不当可能会导致网页功能受限或出现错误。因此，在部署 CSP 之前，建议仔细测试和评估策略的影响，并确保与网页中使用的资源和功能相匹配。

## 4.CSP在使用中有哪些问题？
在使用 Content Security Policy（CSP）时，可能会遇到以下一些常见问题和挑战：

- 兼容性问题：不同浏览器对 CSP 的支持程度可能有所不同，特别是一些旧版本的浏览器。因此，需要在制定 CSP 策略时考虑到不同浏览器的兼容性，并进行适当的测试和调整。

- 策略配置错误：配置 CSP 策略时，如果指令和选项设置不正确，可能会导致网页功能受限或出现错误。因此，在部署 CSP 之前，需要仔细测试和评估策略的影响，并确保与网页中使用的资源和功能相匹配。

- 内联脚本和样式问题：默认情况下，CSP 会阻止内联脚本和内联样式的执行，以减少 XSS 攻击的风险。但有些网页或应用程序可能依赖于内联脚本和样式，这就需要使用 nonce 或 hash 等机制来允许特定的内联资源。

- 第三方资源问题：CSP 默认情况下会阻止加载外部的脚本、样式、字体等资源，除非明确指定允许的来源。这可能会导致一些第三方资源无法加载或被阻止，因此需要确保正确配置 CSP，以允许所需的第三方资源加载。

- 报告和监控问题：CSP 提供了报告违规行为的机制，可以将安全事件信息发送到指定的 URL 或端点。但需要确保正确配置报告机制，并监控和分析报告数据，以及及时采取适当的措施来应对安全事件。

- CSP 绕过问题：尽管 CSP 可以有效防止大多数 XSS 攻击，但攻击者仍然可能找到绕过 CSP 的方法。因此，需要定期关注最新的安全威胁和漏洞，并及时更新和修补相关的漏洞。

总之，CSP 是一种强大的安全机制，但在使用过程中需要仔细考虑兼容性、策略配置、内联资源、第三方资源、报告和监控等方面的问题，并根据具体情况采取适当的措施。同时，也需要持续关注和学习最新的安全威胁和最佳实践，以保持对 CSP 的有效使用。

## 5.如何绕过csp？

内容安全策略（CSP）虽然是一种有效的安全机制，但仍然可能存在一些情况会被绕过，其中一些情况包括：

1. **内联脚本和样式：** 如果您的 CSP 策略允许内联脚本或样式（如使用 `<script>` 标签或 `style` 属性），攻击者可能利用这些内联内容来执行恶意代码，从而绕过 CSP。

2. **未正确配置指令：** 如果 CSP 策略中存在错误或遗漏，或者某些指令设置不当，攻击者可能利用这些漏洞来绕过 CSP 的限制。

3. **安全策略绕过漏洞：** CSP 实现中可能存在漏洞或安全漏洞，攻击者可能利用这些漏洞来绕过 CSP 的限制。

4. **浏览器兼容性问题：** 不同浏览器对 CSP 的支持和实现可能存在差异，攻击者可能利用这些差异来绕过 CSP 的限制。

5. **恶意扩展或插件：** 恶意浏览器扩展或插件可能会绕过浏览器的 CSP 实施，从而执行恶意操作。

6. **社会工程和用户交互：** 攻击者可能利用社会工程手段或欺骗用户与恶意站点交互，从而绕过 CSP 的限制。

为了最大程度地减少 CSP 被绕过的风险，您应该遵循最佳实践，制定严格的 CSP 策略，定期审查和更新策略，监控违规尝试，并确保网站的所有内容都符合 CSP 的限制。如果您有任何关于 CSP 或安全性的其他问题，请随时告诉我。
## 6.作为一名前端开发者,如何避免csrf攻击？

为了避免跨站请求伪造（CSRF）攻击，作为前端开发者可以采取以下措施：
- 双重 cookie 验证 
当用户登陆时，服务器在HTTP响应中设置一个有特定值的Cookie。
客户端的每一次请求都需要读取这个Cookie并将它的值复制到请求头部或请求参数中。
服务器需要验证请求头部或请求参数中的值是否与Cookie中的值一致。

- 使用 CSRF Token：在每个用户会话中生成一个随机的 CSRF Token，并将其嵌入到表单、AJAX 请求或自定义 HTTP 头中。服务器在接收到请求时验证该 Token，确保请求是合法的。这样可以防止攻击者通过伪造请求来执行恶意操作。

- 启用 SameSite Cookie 属性：将 Cookie 的 SameSite 属性设置为 "Strict" 或 "Lax"，以限制 Cookie 只能在同一站点上发送，防止跨站点请求。

我们应该如何使用SamesiteCookie
如果SamesiteCookie被设置为Strict，浏览器在任何跨域请求中都不会携带Cookie，新标签重新打开也不携带，所以说CSRF攻击基本没有机会。

但是跳转子域名或者是新标签重新打开刚登陆的网站，之前的Cookie都不会存在。尤其是有登录的网站，那么我们新打开一个标签进入，或者跳转到子域名的网站，都需要重新登录。对于用户来讲，可能体验不会很好。

如果SamesiteCookie被设置为Lax，那么其他网站通过页面跳转过来的时候可以使用Cookie，可以保障外域连接打开页面时用户的登录状态。但相应的，其安全性也比较低。

另外一个问题是Samesite的兼容性不是很好，现阶段除了从新版Chrome和Firefox支持以外，Safari以及iOS Safari都还不支持，现阶段看来暂时还不能普及。

而且，SamesiteCookie目前有一个致命的缺陷：不支持子域。例如，种在topic.a.com下的Cookie，并不能使用a.com下种植的SamesiteCookie。这就导致了当我们网站有多个子域名时，不能使用SamesiteCookie在主域名存储用户登录信息。每个子域名都需要用户重新登录一次。

总之，SamesiteCookie是一个可能替代同源验证的方案，但目前还并不成熟，其应用场景有待观望。

- 检查 Referer 头部：服务器可以检查请求的 Referer 头部，确保请求来自预期的来源。但需要注意，Referer 头部并不是始终可靠，因为它可能被浏览器或代理服务器篡改或禁用。

另外在以下情况下Referer没有或者不可信：

IE6、7下使用window.location.href=url进行界面的跳转，会丢失Referer。
IE6、7下使用window.open，也会缺失Referer。
HTTPS页面跳转到HTTP页面，所有浏览器Referer都丢失。
点击Flash上到达另外一个网站的时候，Referer的情况就比较杂乱，不太可信。

- 验证请求来源：服务器可以验证请求的来源是否为预期的域名。可以通过检查请求的 Origin 或 Host 头部来实现。但需要注意，这种验证方法也可能受到攻击者的欺骗，因此需要谨慎使用。

- 使用验证码：对于敏感操作，可以使用验证码来确保请求是由真实用户发起的。验证码可以防止自动化攻击和机器人攻击。

- 避免使用自动登录：自动登录功能可能会增加 CSRF 攻击的风险。因此，对于敏感操作，最好要求用户手动输入凭据进行身份验证。

定期更新和修补漏洞：及时更新和修补使用的框架、库和插件，以确保使用的是最新的安全版本。

这些措施可以帮助减少 CSRF 攻击的风险，但并不能完全消除。因此，开发者还应该了解最新的安全威胁和最佳实践，并根据具体情况采取适当的安全措施。

## 7.DDOS攻击
DDoS(分布式拒绝服务攻击)

- 带宽消耗型攻击:
所谓带宽消耗型攻击就是攻击者将提供网络服务的正常的带宽消耗殆尽，带宽消耗殆尽后就会造成网络堵塞，
从而当正常的用户与服务器进行通信时无法提供正常服务。举vps的例子，vps服务器一般都有固定的带宽，当带宽被占满时就无法为新客户端提供正常的服务
- 资源消耗型攻击:
资源消耗型攻击是指攻击者并没有把带宽消耗完，但是将服务资源，也就是后台的计算资源，内存资源消耗完，从而导致无法提供正常服务。

1.网络层攻击

- Syn-flood
Syn-Flood攻击属于TCP攻击中的一种利用了TCP协议实现上的一个缺陷，通过向网络服务所在端口发送大量的伪造源地址的攻击报文，就可能造成目标服务器中的半开连接队列被占满，从而阻止其他合法用户进行访问.
- ACK-flood

ACK Flood攻击是在TCP连接建立之后，所有的数据传输TCP报文都是带有ACK标志位的，，主机在接收到一个带有ACK标志位的数据包的时候，需要检查该数据包所表示的连接四元组是否存在，如果存在则检查该数据包所表示的状态是否合法，然后再向应用层传递该数据包。如果在检查中发现该数据包不合法，例如该数据包所指向的目的端口在本机并未开放，则主机操作系统协议栈会回应RST包告诉对方此端口不存在。

- UDP-flood
我们知道了TCP协议是一种面向连接的传输协议。但是UDP协议与TCP协议不同，UDP是一个无连接协议。使用UDP协议传输数据之前，客户端和服务器之间不建立连接，如果在从客户端到服务器端的传递过程中出现数据的丢失，协议本身并不能做出任何检测或提示。因此，通常人们把UDP协议称为不可靠的传输协议。UDP Flood属于带宽类攻击，黑客们通过僵尸网络向目标服务器发起大量的UDP报文，这种UDP报文通常为大包，且速率非常快，通常会造成以下危害:消耗网络带宽资源，严重时造成链路拥塞大量变源变端口的UDP Flood会导致依靠会话转发的网络设备，性能降低甚至会话耗尽，从而导致网络瘫痪

2.应用层攻击

- CC
攻击者借助代理服务器生成指向受害主机的合法请求，实现DDOS和伪装就叫: CC(ChallengeCollapsar)。
CC主要是用来攻击页面的。大家都有这样的经历，就是在访问论坛时，如果这个论坛比较大，访问的人比较多，打开页面的速度会比较慢，访问的人越多，论坛的页面越多，数据库压力就越大，被访问的频率也越高，占用的系统资源也就相当可观

- DNS flood
黑客控制僵尸网络阿DNS服务器发送大量不存在的域名的解析请求，最终导致服务器因大量DNS请求而超载。

- DoS
DoS攻击是指故意的攻击网络协议实现的缺陷或直接通过野蛮手段残忍地耗尽被攻击对象的资源目的是让目标计算机或网络无法提供正常的服务或资源访问，使目标系统服务系统停止响应甚至崩溃，而在此攻击中并不包括侵入目标服务器或目标网络设备。这些服务资源包括网络带宽，文件系统空间容量开放的进程或者允许的连接。这种攻击会导致资源的匮乏，无论计算机的处理速度多快、内存容量多大、网络带宽的速度多快都无法避免这种攻击带来的后果

DDoS攻击之CC攻击

- 1.CC之起源
CC=Challenge Collapsar,其前身名为Fatboy攻击,Collapsar(黑洞)是绿盟科技的一款抗DDoS产品品牌,早期在对抗拒服务攻击的领域内具有比较高的影响力和口碑。因此,此攻击更名为Challenge Collapsar,表示要向黑洞发起挑战。

- 2.CC概述
CC攻击是DDOS的一种,也是一种常见的网站攻击方法。原理就是攻击者控制某些主机不停的发大量的数据包给对方服务器造成服务器资源耗尽,一直到宕机崩溃。CC主要是用来攻击页面的,每个人都有这样的体验:当一个网页访问的人数特别多的时候,打开网页就慢了CC就是模拟多个用户不停地进行访问那些需要大量数据操作(就是需要大量CPU时间)的页面,造成服务器资源的浪费,CPU长时间处于100%,永远都有处理不完的连接直至网络拥塞,正常的访问被中止

- 3.CC与DDOS对比
它和DDOS最明确的区别就是,虽然它们攻击的类型不同,但是CC攻击和DDOS的都属于同一种类型,因为它们的设计思想是一样的,它的诞生是利用TCP/IP协议的缺陷。CC攻击主要是网页攻击而DDOS攻击是进行发送大量的数据包给目标.造成目标机子瘫痪。一句话总结: CC攻击Web应用程序比较消耗资源的地方,DDOS直接对服务器本身或网络链路疯狂攻击

DDOS防御结构
ISP近源清洗，云清洗/CDN硬抗，DC级近目的清洗，OS/APP层

DDoS（分布式拒绝服务攻击）是一种恶意行为，旨在通过超载目标系统的网络、服务器或应用程序，使其无法正常工作。为了防御DDoS攻击，可以采取以下措施：

ISP近源清洗：Internet服务提供商（ISP）可以在其网络边界处部署DDoS防御设备，对进入其网络的流量进行监测和过滤。这样可以阻止大部分恶意流量进入目标网络。

云清洗/CDN硬抗：使用云服务提供商的DDoS防护服务或内容分发网络（CDN）可以帮助抵御大规模的DDoS攻击。这些服务通常具备强大的基础设施和分布式防御机制，能够分担和过滤掉攻击流量。

DC级近目的清洗：数据中心级别的近目的清洗是指在目标服务器所在的数据中心内部进行DDoS防护。这可以通过在数据中心内部部署专用的DDoS防护设备来实现，以便及早识别和过滤掉攻击流量。

OS/APP层防御：在操作系统（OS）和应用程序（APP）层面上，可以采取一些防御措施来减轻DDoS攻击的影响。例如，使用防火墙、负载均衡器和反向代理来过滤和分发流量，设置连接和请求限制，以及实施有效的访问控制策略。

需要注意的是，以上措施通常需要综合使用，因为DDoS攻击的形式和规模各不相同。同时，及时更新和维护系统、应用程序的安全补丁，以及实施网络监控和入侵检测系统也是重要的安全实践

## 其它安全问题
sql注入，dns劫持，http劫持，
三方 npm 依赖包的安全风险，npm audit
点击劫持 X-FRAME-OPTIONS iframe sandbox
[安全](https://www.bilibili.com/video/BV1AQ4y1E729?p=12&vd_source=78435c3cefd4783245d9d16d09d19859)