# 从输入 url 到页面渲染

## 一、用户输入 url 开始进行 url 解析
1. 
2. ==IPC==

-  
- 

## 二、

## 三、

## 四、==ISP==

## 五、建立 TCP 连接

## 六、发送 http 请求
1. 三次握手 + tls握手
2. 四次挥手

## 七、读取响应
1. 
2. 
3. 
4. 

## 八、查找渲染进程



## 九、提交导航


## 十、解析 html 过程

### **1.解析HTML构建DOM树**
```
Bytes → characters → tokens → nodes → DOM
```
1. 
2. 
3. 
   
4. 
5. 

### **2.构建CSSOM并进行样式计算**

#### 需要解析的三类元素


#### 1.格式化样式表
```
Bytes → characters → tokens → nodes → CSSOM
```
在控制台打印document.styleSheets，这就是解析出的样式表
#### 2.标准化样式属性

#### 3.计算每个节点的具体样式

1. 
2. 

## 十一、渲染过程
1. 
2. 
3. 
### **1.生成布局树(Layout Tree)** 布局（Layout）
- 
- 
- 

1. 
2. 

### **2.绘制过程 （Paint）**

#### 1.建立图层树-合成层
- 
- 
##### 1.生成渲染层的条件
1. 
2. 
##### 2.合成层
在开发者工具中看到的不是渲染层，而是下面要讲的合成层，只有一些**特殊的渲染层**才会被提升为合成层，通常来说有这些情况：
1. 
2. 
3. 
4. 
5. 
6. 
7. 
8. 
9. 
10. 
11. 
可以看出，上面这些条件属于生成渲染层的“加强版”，也就是说形成合成层的条件要更苛刻。

##### 3.利用合成层优化
- 
- 
**方案：**
1. 
2. 
3. 
4. 
**缺点：**
1. 
2. 
##### 4.隐式合成
- 
- 
##### 5.层爆炸
- 
- 

##### 6.层压缩
- 
- 



## 十一、初始化加载完成
当导航提交完成后，渲染进程开始加载资源及渲染页面，当页面渲染完成后（页面及内部的iframe都触发了onload事件），会向浏览器进程发送IPC消息，告知浏览器进程，这个时候UI thread会停止展示tab中的加载中图标。