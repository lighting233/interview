# 一、24年8月8日 第一次学习
## lteetcode-704 二分法查找
### 数组

1. **什么是数组**？

> 在计算机科学中，数组数据结构（英语：array data structure），简称数组（英语：Array），是由**相同类型的元素**（element）的集合所组成的数据结构，**分配一块连续的内存**来存储。利用元素的索引（index）可以计算出该元素**对应的存储地址**。

- 特点：
  1. 数组中所有元素是**同种类型**的元素（同一类型元素所需存储空间大小一致，所以我们可以很方便的利用元素的索引来计算出元素所在的位置.
  2. 分配**一块连续**的内存存储（固定长度、连续）.

    *[特殊]: 1.同一个JS数组的元素可以是**不同的数据类型**，那我们肯定没法固定长度为每个元素分配空间，那么这样的数组也就没办法通过元素的索引来计算出某个元素对应的存储地址了。2.JS数组可以**任意更改大小**。看到这里，你还会觉得JS数组在内存中分配的空间是连续的吗？如果是连续的，如果我们无限制的增加数组的大小，怎么保证后面的区域也是可以分配给数组的呢？
  3. C/C++如此， js 特殊
2. **Javascript的Array中的元素在内存上的分布是连续的吗？为什么**？

   1. 有些连续，有些不连续。
   2. 在JS中数组存在两种形式，一种是与 C/C++ 等相同的在连续内存中存放数据的==快数组==，另一种是 HashTable 结构的==慢数组==，是一种典型的==字典形式==。
   3. 改变数组的大小容易把默认创建的快数组变成慢数组，从而影响遍历速度。==但不绝对==。


3. **在 V8 引擎中什么是快慢数组？如何实现的？ 为什么有快慢数组之分？**

    > Object.defineProperty 自定义 key、value、descriptor 时，V8 都会使用**慢属性**

   1.  - ==快数组==是一种线性的存储方式，内部存储是**连续的内存**（新创建的空数组，默认的存储方式是快数组；
       - 快数组长度是可变的，可以根据元素的增加和删除来动态调整存储空间大小，内部是通过扩容和收缩机制实现；
       - ==慢数组==是一种**字典**的内存形式。不用分配大块连续的存储空间，节省了内存，但是由于需要维护这样一个 HashTable，其效率会比快数组低，V8 中是以 Dictionary 的结构实现的慢数组。
   2.  在 V8 中，前后者分别被称为 数组索引属性 (Array-indexed Properties)和 命名属性 (Named Properties)，遍历时一般会先遍历前者。前后两者在底层存储在两个单独的数据结构中，分别用  elements 和  properties 两个指针指向它们。
   3.  1.数据类型不同导致。 2.V8 的存储策略，在内存大小和操作快慢间取得平衡。
    
       


4. **快慢数组如何相互转化？**

    1. **快转慢**
    - 如果快数组扩容后的容量是原来的 3 倍以上，意味着它比 HashTable 形式存储占用更大的内存，快数组会转换为慢数组；
    - 如果快数组新增的索引与原来最大索引的差值大于 1024，快数组会被转换会慢数组。（之前的例子：[(arr.length + 1026) - (arr.length - 1)] = 1027 > 1024，故 arr 由快数组转为慢数组。）
    2. **慢转快**
    - 当慢数组的元素可存放在快数组中且长度小于 Smi::kMaxValue 且当前慢数组相对于快数组仅节省了少于或等于50%的空间，则转变为快数组。

5. **有何实际应用？**

    - 主要关注快转慢， 例如给快数组长度增加arr.length+1026，会把快数组转为慢数组，从而大幅影遍历速度。